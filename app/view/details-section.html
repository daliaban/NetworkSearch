<div id="detailsscreen">
    <h3>Details of Search - {{search.Name}}</h3>
    <div id="information">
        <div class="searchdescription">
            <ul style="list-style: none;">
                <li><span class="desclabel">Description:</span>&nbsp; {{search.Description}}</li>
                <li><span class="desclabel">Files Found:</span>&nbsp; {{search.Count}}</li>
            </ul>
        </div>
        <h5 style="float: right;"><a ui-sref="index">Go Back to Main Page</a></h5>
    </div>
    <div class="filters pull-left">
        <form name="searchpathForm" class="form-horizontal" role="form">
            <div class="form-group">
                <label for="searchpath" class="control-label  col-sm-2">Search Files by Path:</label>
                <input name="searchpath" class="form-control  col-sm-10" ng-model="searchpath" ng-pattern="/^[A-Za-z\\]*$/" required>
            </div>
            <button class="btn btn-primary" ng-click="searchByPath()" ng-disabled="!searchpathForm.searchpath.$valid">Search</button>
            <button class="btn btn-primary" ng-click="clearSearch()">Clear Search</button>
        </form>
        
        <form name="filterForm" class="form-group" role="form">
            <label for="filterby">Select Filter By:</label>
            <select name="filterby" ng-model="filterBy" ng-change="selectChange()">
                <option value="">Select Filter</option>
                <option value="size">By Size</option>
                <option value="date">By Date</option>
            </select>
            <div ng-show="filterBy === 'size'" id="forSize">
                <label for="minsize">Minimum Size:</label>
                <input name="minsize">
                <select>
                    <option value="">bytes</option>
                    <option value="size">KB</option>
                    <option value="date">MB</option>
                    <option value="">GB</option>
                    <option value="size">TB</option>
                    <option value="date">PB</option>
                </select>
                
                <label for="minsize">Maximum Size:</label>
                <input name="minsize">
                <select>
                    <option value="">bytes</option>
                    <option value="size">KB</option>
                    <option value="date">MB</option>
                    <option value="">GB</option>
                    <option value="size">TB</option>
                    <option value="date">PB</option>
                </select>
            </div>
            <div ng-show="filterBy === 'date'" id="forDate">Y</div>
            
            <button ng-show="filterBy" class="btn btn-primary">Apply Filter</button>
            <button ng-show="filterBy" class="btn btn-primary">Clear Filter</button>
        </form>
    </div>
    <div class="resultsperpage">
        <span>Results per page:</span>&nbsp;&nbsp;<a href="" ng-click="resultsPerPage(10)" ng-class="{10: 'active', 50: 'inactive', 100: 'inactive'}[pagingOptions.pageSize]">10</a>
        &nbsp;&nbsp;<a href="" ng-click="resultsPerPage(50)" ng-class="{10: 'inactive', 50: 'active', 100: 'inactive'}[pagingOptions.pageSize]">50</a>
        &nbsp;&nbsp;<a href="" ng-click="resultsPerPage(100)" ng-class="{10: 'inactive', 50: 'inactive', 100: 'active'}[pagingOptions.pageSize]">100</a>
    </div>
    <div class="detailstable" ng-show="data.paged.length">
        <table class="table table-striped table-sm">
            <thead>
            <th>#ID</th>
            <th>
                <a href="" ng-click="columnHeaderClick('Path')">
                    File Path 
                    <span ng-show="sortOptions.fieldName == 'Path' && !sortOptions.sortReverse" class="fa fa-caret-down"></span>
                    <span ng-show="sortOptions.fieldName == 'Path' && sortOptions.sortReverse" class="fa fa-caret-up"></span>
                </a>
            </th>
            <th>
                <a href="" ng-click="columnHeaderClick('Size')">
                    Size
                    <span ng-show="sortOptions.fieldName == 'Size' && !sortOptions.sortReverse" class="fa fa-caret-down"></span>
                    <span ng-show="sortOptions.fieldName == 'Size' && sortOptions.sortReverse" class="fa fa-caret-up"></span>
                </a>
            </th>
            <th>
                <a href="" ng-click="columnHeaderClick('Extension')">
                    Extension
                    <span ng-show="sortOptions.fieldName == 'Extension' && !sortOptions.sortReverse" class="fa fa-caret-down"></span>
                    <span ng-show="sortOptions.fieldName == 'Extension' && sortOptions.sortReverse" class="fa fa-caret-up"></span>
                </a>
            </th>
            <th>
                <a href="" ng-click="columnHeaderClick('Date')">
                    Last Used
                    <span ng-show="sortOptions.fieldName == 'Date' && !sortOptions.sortReverse" class="fa fa-caret-down"></span>
                    <span ng-show="sortOptions.fieldName == 'Date' && sortOptions.sortReverse" class="fa fa-caret-up"></span>
                </a>
            </th>
        </thead>
        <tbody>
            <tr ng-repeat="item in data.paged | orderBy:sortOptions.fieldName:sortOptions.sortReverse">
                <td>{{(pagingOptions.curPage*pagingOptions.pageSize) + $index+1}}</td><td>{{item.Path}}</td>
                <td>{{item.Size | bytes}}</td><td>{{splitPath(item.Path) | uppercase}}</td>
                <td>{{latestDate(item.Created, item.LastModified) | date : 'yyyy-MM-dd HH:mm:ss Z'}}</td>
            </tr>
        </tbody>
        </table> 
    </div>
    <div ng-show="data.paged.length">
        <div class="pagination">
            <ul class="pagination-control pagination">
                <li>
                    <button id="prev" class="btn btn-primary" ng-disabled="pagingOptions.curPage == 0" ng-click="changePage(pagingOptions.curPage-1)">Prev</button>
                </li>
                <li>
                    <span> Page {{pagingOptions.curPage + 1}} of {{ pagingOptions.totalPages }}</span>
                </li>
                <li>
                    <button id="next" class="btn btn-primary" ng-disabled="pagingOptions.curPage >= pagingOptions.totalPages-1" ng-click="changePage(pagingOptions.curPage+1)">Next</button>
                </li>
            </ul>
        </div>
    </div>
</div>